{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Routes,Route}from'react-router-dom';import Movies from'./pages/Movies';import AddMovieForm from'./components/AddMovieForm';import Home from'./pages/Home';import About from'./pages/About';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BASE_URL=process.env.REACT_APP_BASE_URL||'https://projet-phase-2-backend.onrender.com';function App(){const[movies,setMovies]=useState([]);useEffect(()=>{fetch(`${BASE_URL}/movies`).then(res=>res.json()).then(setMovies);},[]);function addMovie(newMovie){setMovies([...movies,newMovie]);}function addLike(id){const target=movies.find(m=>m.id===id);if(!target)return;fetch(`${BASE_URL}/movies/${id}`,{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({likes:target.likes+1})}).then(res=>res.json()).then(updated=>{setMovies(movies.map(m=>m.id===id?updated:m));});}return/*#__PURE__*/_jsxs(\"main\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(AddMovieForm,{addMovie:addMovie}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/movies\",element:/*#__PURE__*/_jsx(Movies,{movies:movies,addLike:addLike})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",element:/*#__PURE__*/_jsx(About,{})})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Routes","Route","Movies","AddMovieForm","Home","About","jsx","_jsx","jsxs","_jsxs","BASE_URL","process","env","REACT_APP_BASE_URL","App","movies","setMovies","fetch","then","res","json","addMovie","newMovie","addLike","id","target","find","m","method","headers","body","JSON","stringify","likes","updated","map","style","padding","children","path","element"],"sources":["C:/Users/Marc-Arthur/Desktop/mon-projet-phase-2/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport Movies from './pages/Movies';\r\nimport AddMovieForm from './components/AddMovieForm';\r\nimport Home from './pages/Home';\r\nimport About from './pages/About';\r\n\r\nconst BASE_URL = process.env.REACT_APP_BASE_URL || 'https://projet-phase-2-backend.onrender.com';\r\n\r\nfunction App() {\r\n  const [movies, setMovies] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(`${BASE_URL}/movies`)\r\n      .then((res) => res.json())\r\n      .then(setMovies);\r\n  }, []);\r\n\r\n  function addMovie(newMovie) {\r\n    setMovies([...movies, newMovie]);\r\n  }\r\n\r\n  function addLike(id) {\r\n    const target = movies.find((m) => m.id === id);\r\n    if (!target) return;\r\n\r\n    fetch(`${BASE_URL}/movies/${id}`, {\r\n      method: 'PATCH',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ likes: target.likes + 1 })\r\n    })\r\n      .then((res) => res.json())\r\n      .then((updated) => {\r\n        setMovies(movies.map((m) => (m.id === id ? updated : m)));\r\n      });\r\n  }\r\n\r\n  return (\r\n    <main style={{ padding: '20px' }}>\r\n      <AddMovieForm addMovie={addMovie} />\r\n      <Routes>\r\n        <Route path=\"/\" element={<Home />} />\r\n        <Route path=\"/movies\" element={<Movies movies={movies} addLike={addLike} />} />\r\n        <Route path=\"/about\" element={<About />} />\r\n      </Routes>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,MAAM,CAAEC,KAAK,KAAQ,kBAAkB,CAChD,MAAO,CAAAC,MAAM,KAAM,gBAAgB,CACnC,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,MAAO,CAAAC,IAAI,KAAM,cAAc,CAC/B,MAAO,CAAAC,KAAK,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAI,6CAA6C,CAEhG,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAExCD,SAAS,CAAC,IAAM,CACdmB,KAAK,CAAC,GAAGP,QAAQ,SAAS,CAAC,CACxBQ,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAACF,SAAS,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAK,QAAQA,CAACC,QAAQ,CAAE,CAC1BN,SAAS,CAAC,CAAC,GAAGD,MAAM,CAAEO,QAAQ,CAAC,CAAC,CAClC,CAEA,QAAS,CAAAC,OAAOA,CAACC,EAAE,CAAE,CACnB,KAAM,CAAAC,MAAM,CAAGV,MAAM,CAACW,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACH,EAAE,GAAKA,EAAE,CAAC,CAC9C,GAAI,CAACC,MAAM,CAAE,OAEbR,KAAK,CAAC,GAAGP,QAAQ,WAAWc,EAAE,EAAE,CAAE,CAChCI,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAER,MAAM,CAACQ,KAAK,CAAG,CAAE,CAAC,CAClD,CAAC,CAAC,CACCf,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEgB,OAAO,EAAK,CACjBlB,SAAS,CAACD,MAAM,CAACoB,GAAG,CAAER,CAAC,EAAMA,CAAC,CAACH,EAAE,GAAKA,EAAE,CAAGU,OAAO,CAAGP,CAAE,CAAC,CAAC,CAC3D,CAAC,CAAC,CACN,CAEA,mBACElB,KAAA,SAAM2B,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC/B/B,IAAA,CAACJ,YAAY,EAACkB,QAAQ,CAAEA,QAAS,CAAE,CAAC,cACpCZ,KAAA,CAACT,MAAM,EAAAsC,QAAA,eACL/B,IAAA,CAACN,KAAK,EAACsC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEjC,IAAA,CAACH,IAAI,GAAE,CAAE,CAAE,CAAC,cACrCG,IAAA,CAACN,KAAK,EAACsC,IAAI,CAAC,SAAS,CAACC,OAAO,cAAEjC,IAAA,CAACL,MAAM,EAACa,MAAM,CAAEA,MAAO,CAACQ,OAAO,CAAEA,OAAQ,CAAE,CAAE,CAAE,CAAC,cAC/EhB,IAAA,CAACN,KAAK,EAACsC,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAEjC,IAAA,CAACF,KAAK,GAAE,CAAE,CAAE,CAAC,EACrC,CAAC,EACL,CAAC,CAEX,CAEA,cAAe,CAAAS,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}